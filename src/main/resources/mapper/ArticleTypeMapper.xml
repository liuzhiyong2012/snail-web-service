<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.snail.web.modules.crawler.mapper.ArticleTypeMapper">
    <delete id="deleteRecord">
        update ms_article_type set is_deleted = 1  where id = #{id}
    </delete>

    <select id="count" resultType="java.lang.Integer">
            select count(1) from `ms_article_type`
            where 1=1 and  is_deleted != 1
        <if test="name != null">
            and name = #{name}
        </if>
        <if test="code != null">
            and code = #{code}
        </if>
        <if test="type != null">
            and type = #{type}
        </if>
        <if test="param != null">
            and param = #{param}
        </if>

    </select>

    <select id="page" resultType="com.snail.web.modules.crawler.dto.entity.ArticleType">
        select atype.id, atype.name,atype.code,atype.status,atype.desc,atype.type,atype.param,atype.level,atype.parent_id as parentId,atype.created_time as createdTime, atype.updated_time as updatedTime
        from `ms_article_type` atype
        where 1=1 and atype.is_deleted != 1
        <if test="name != null">
            and instr( atype.name,#{name}) > 0
        </if>
        <if test="code != null">
            and instr(atype.code,#{code}) > 0
        </if>
        <if test="type != null">
            and type = #{type}
        </if>
        <if test="param != null">
            and param = #{param}
        </if>
        <if test="parentId != null">
            and parent_id = #{parentId}
        </if>
        <if test = "status != null">
            and instr(atype.status,#{status}) > 0
        </if>
        <if test=" level != null">
            and instr(atype.level,#{level}) > 0
        </if>
        limit #{start},#{pageSize}
    </select>
</mapper>
